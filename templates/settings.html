{% extends "base.html" %}

{% block content %}
<div class="max-w-3xl mx-auto">
    <!-- 页面标题 -->
    <div class="mb-8 text-center">
        <h2 class="text-[clamp(1.5rem,3vw,2rem)] font-bold text-secondary mb-2">
            <i class="fa fa-cogs mr-2"></i>服务器路径配置
        </h2>
        <p class="text-gray-600">设置系统所需文件和目录的路径</p>
    </div>

    <!-- 配置表单 -->
    <div class="bg-white rounded-xl p-6 md:p-8 card-shadow animate-fadeIn">
        <form method="POST" action="/settings" class="space-y-6">
            <!-- 服务器主目录 -->
            <div class="form-group">
                <label for="SERVER_PATH" class="block text-gray-700 font-medium mb-2">
                    <i class="fa fa-server text-primary mr-1"></i>服务器主目录 <span class="text-error">*</span>
                </label>
                <input type="text" id="SERVER_PATH" name="SERVER_PATH" required 
                       value="{{ config.SERVER_PATH }}"
                       placeholder="例如: /home/user/data 或 C:/Data"
                       class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-custom">
                <p class="mt-1 text-sm text-gray-500">系统存放数据的根目录</p>
            </div>

            <!-- 光缆目录 -->
            <div class="form-group">
                <label for="CABLE_PATH" class="block text-gray-700 font-medium mb-2">
                    <i class="fa fa-folder text-primary mr-1"></i>光缆管理目录 <span class="text-error">*</span>
                </label>
                <input type="text" id="CABLE_PATH" name="CABLE_PATH" required 
                       value="{{ config.CABLE_PATH }}"
                       placeholder="例如: 光缆 或 optical_cable"
                       class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-custom">
                <p class="mt-1 text-sm text-gray-500">相对于服务器主目录的子目录</p>
            </div>

            <!-- PMS文件 -->
            <div class="form-group">
                <label for="PMS_FILE" class="block text-gray-700 font-medium mb-2">
                    <i class="fa fa-file-excel-o text-primary mr-1"></i>PMS任务清单文件 <span class="text-error">*</span>
                </label>
                <input type="text" id="PMS_FILE" name="PMS_FILE" required 
                       value="{{ config.PMS_FILE }}"
                       placeholder="例如: 系统任务清单"
                       class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-custom">
                <p class="mt-1 text-sm text-gray-500">任务清单文件名（不含扩展名）</p>
            </div>

            <!-- SSCM文件 -->
            <div class="form-group">
                <label for="SSCM_FILE" class="block text-gray-700 font-medium mb-2">
                    <i class="fa fa-file-excel-o text-primary mr-1"></i>领用申请单文件 <span class="text-error">*</span>
                </label>
                <input type="text" id="SSCM_FILE" name="SSCM_FILE" required 
                       value="{{ config.SSCM_FILE }}"
                       placeholder="例如: 领用申请单详情列表"
                       class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-custom">
                <p class="mt-1 text-sm text-gray-500">领用申请单文件名（不含扩展名）</p>
            </div>

            <!-- 结果文件 -->
            <div class="form-group">
                <label for="RESULTS_FILE" class="block text-gray-700 font-medium mb-2">
                    <i class="fa fa-file-excel-o text-primary mr-1"></i>结果文件 <span class="text-error">*</span>
                </label>
                <input type="text" id="RESULTS_FILE" name="RESULTS_FILE" required 
                       value="{{ config.RESULTS_FILE }}"
                       placeholder="例如: results 或 处理结果"
                       class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-custom">
                <p class="mt-1 text-sm text-gray-500">系统处理结果文件名（不含扩展名）</p>
            </div>

            <!-- 提交按钮 -->
            <div class="pt-4">
                <button type="submit"
                        class="w-full bg-primary hover:bg-primary/90 text-white font-medium py-3 px-6 rounded-lg transition-custom flex items-center justify-center">
                    <i class="fa fa-save mr-2"></i>保存配置
                </button>
            </div>
        </form>
    </div>

    <!-- 路径信息 -->
    <div class="mt-8 bg-accent/20 rounded-xl p-6 card-shadow">
        <h3 class="font-semibold text-secondary mb-3 flex items-center">
            <i class="fa fa-info-circle mr-2"></i>当前完整路径
        </h3>
        <ul class="list-disc pl-5 space-y-2 text-gray-700 text-sm">
            <li>服务器主目录: {{ paths.SERVER_PATH }}</li>
            <li>光缆管理目录: {{ paths.CABLE_PATH }}</li>
            <li>PMS任务清单: {{ paths.PMS_FILE }}.xlsx 或 .parquet</li>
            <li>领用申请单: {{ paths.SSCM_FILE }}.xlsx 或 .parquet</li>
            <li>结果文件: {{ paths.RESULTS_FILE }}.xlsx 或 .parquet</li>
        </ul>
    </div>

    <!-- 帮助信息 -->
    <div class="mt-8 bg-white rounded-xl p-6 card-shadow">
        <h3 class="font-semibold text-secondary mb-3 flex items-center">
            <i class="fa fa-question-circle mr-2"></i>配置说明
        </h3>
        <ul class="list-disc pl-5 space-y-2 text-gray-700">
            <li>所有带 <span class="text-error">*</span> 的字段为必填项</li>
            <li>文件路径可以使用相对路径（相对于应用程序）或绝对路径</li>
            <li>系统会自动处理Excel(.xlsx)和Parquet(.parquet)两种格式的文件</li>
            <li>修改配置后，系统会自动创建所需的目录</li>
            <li>建议使用不含特殊字符和空格的路径名称</li>
        </ul>
    </div>
</div>
{% endblock %}
